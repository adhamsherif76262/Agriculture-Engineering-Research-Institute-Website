<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 
        The Title tag Should be informative for SEO & should match the H1 tag of the page 
        should also be limited to about 50-60 characters as not get truncated in the SERPs
        ==> Use Article tag
        ==> Use Alt Img attribute
    -->
    <title lang="" title="Page Title" id="Title_Home"></title>
    <link rel="stylesheet" href="./CSS/NavBar .css">
    <link rel="stylesheet" href="./CSS/Footer.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
        <defs>
            <filter id="goo">
                <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7"
                    result="goo" />
                <feBlend in="SourceGraphic" in2="goo" />
            </filter>
        </defs>
    </svg>
    <nav id="Arabic_NavBar">
        
    </nav>
    <nav id="English_NavBar"></nav>
    <!-- <button  type="button" id="Language_Switch" title="Language Button" style="background-color: red; z-index: 100 !important;">sssssssss</button> -->
    <h1 id="Home_H1"></h1>
    <h1>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatibus soluta accusamus adipisci inventore a illo mollitia numquam doloribus unde odit voluptatum vel, ducimus recusandae impedit praesentium, nostrum facilis sit laudantium.</h1>
    <h1>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatibus soluta accusamus adipisci inventore a illo mollitia numquam doloribus unde odit voluptatum vel, ducimus recusandae impedit praesentium, nostrum facilis sit laudantium.</h1>
    <h1>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatibus soluta accusamus adipisci inventore a illo mollitia numquam doloribus unde odit voluptatum vel, ducimus recusandae impedit praesentium, nostrum facilis sit laudantium.</h1>
    <h1>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatibus soluta accusamus adipisci inventore a illo mollitia numquam doloribus unde odit voluptatum vel, ducimus recusandae impedit praesentium, nostrum facilis sit laudantium.</h1>
    <h1>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatibus soluta accusamus adipisci inventore a illo mollitia numquam doloribus unde odit voluptatum vel, ducimus recusandae impedit praesentium, nostrum facilis sit laudantium.</h1>
    <h1>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatibus soluta accusamus adipisci inventore a illo mollitia numquam doloribus unde odit voluptatum vel, ducimus recusandae impedit praesentium, nostrum facilis sit laudantium.</h1>
    <h1>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatibus soluta accusamus adipisci inventore a illo mollitia numquam doloribus unde odit voluptatum vel, ducimus recusandae impedit praesentium, nostrum facilis sit laudantium.</h1>
    <div id="Footer_Section">
        <div class="main"></div>
        <div class="footer"></div>
    </div>
<script  src="./JavaScript/NavBar_Footer_Language Changer.js"></script>
<script  src="./JavaScript/Home.js"></script>
<script  src="./JavaScript/Footer_Bubbles.js"></script>
<script  src="./JavaScript/Arabic_Lang_Button.js"></script>
<script  src="./JavaScript/English_Lang_Button.js"></script>
<script src="./JavaScript/Storage_Data_Encryption.js"></script>
<!-- <script src="./JavaScript/Get Location.js"></script> -->
 <script>
     var Hel = "ZZZZZZZZZZZZZZZZZZZZZZZ";
</script>
<script>
    alert(`The Password Is :: \t\n\n ${password}`)
    // localStorage.clear()
    // console.log(Bubbles)
    // localStorage.setItem("Permenant_Language", "HALAAAA");
    if (!(location.href.includes("/Home") || location.href.includes("/home"))){
        // alert("The Page URL Before Modifications  " + location.href)
        location.href += "/Home";
        // alert("The Page URL After Modifications  " + location.href)
    }
    else{
        // alert("The URL Is On Home Page")
    }
    console.log("Lang From Home :: " + localStorage.getItem("Permenant_Language"));
    if(
    (localStorage.getItem("Permenant_Language") != "English" && localStorage.getItem("Permenant_Language") != "عربي"))
    {

        const xhr = new XMLHttpRequest();
            xhr.open(
              "GET",
              "https://api.geoapify.com/v1/ipinfo?&apiKey=b1eafd427c864fd8ad4009a48be4ec1f"
            );
            xhr.onload = function () {
            //   localStorage.setItem("Permenant_Language", " ");
              JSON.parse(xhr.responseText);
              console.log(JSON.parse(xhr.responseText));
              if (
                JSON.parse(xhr.responseText).country.languages[0].name_native ===
                "العربية"
              ) {
                localStorage.setItem("Permenant_Language", "عربي");
                console.log("Lang From Home After Conversion :: " + localStorage.getItem("Permenant_Language"));
                // sessionStorage.setItem("Permenant_Language", "عربي");
                // sessionStorage.getItem()
                // Permenant_Language = "عربي";
                NavIsAR();
              } else {
                localStorage.setItem("Permenant_Language", "English");
                alert("Lang From Home After Conversion :: " + localStorage.getItem("Permenant_Language"));
                // sessionStorage.setItem("Permenant_Language", "English");
                // Permenant_Language = "English";
                NavIsEn();
              }
            };
        
            xhr.send();
    }
</script>




<!-- <script>
      const password = "$MFi8sX6ia=1/wK|N[9|s9uy%'u!Et?M3u";
      let lastValue = localStorage.getItem("Permenant_Language");

      async function encryptData(password, data) {
      const passwordEncoder = new TextEncoder();
      const passwordBytes = passwordEncoder.encode(password);

      const salt = crypto.getRandomValues(new Uint8Array(16));
      const passwordKey = await crypto.subtle.importKey(
      "raw",
      passwordBytes,
      {
      name: "PBKDF2",
      },
      false,
      ["deriveKey"]
      );

      const key = await crypto.subtle.deriveKey(
      {
      name: "PBKDF2",
      salt: salt,
      iterations: 1000,
      hash: "SHA-256",
      },
      passwordKey,
      {
      name: "AES-CBC",
      length: 256,
      },
      true,
      ["encrypt"]
      );

      const iv = crypto.getRandomValues(new Uint8Array(16));
      const encryptedData = await crypto.subtle.encrypt(
      {
      name: "AES-CBC",
      iv: iv,
      },
      key,
      passwordEncoder.encode(data)
      );

      const encryptedBytes = new Uint8Array(encryptedData);
      const encryptedString = Array.prototype.map
      .call(encryptedBytes, (x) => `00${x.toString(16)}`.slice(-2))
      .join("");

      // Generate two unique padding strings
      const padding1 = crypto.getRandomValues(
      new Uint8Array(encryptedBytes.length)
      );
      const paddingString1 = Array.prototype.map
      .call(padding1, (x) => `00${x.toString(16)}`.slice(-2))
      .join("");

      const padding2 = crypto.getRandomValues(
      new Uint8Array(encryptedBytes.length)
      );
      const paddingString2 = Array.prototype.map
      .call(padding2, (x) => `00${x.toString(16)}`.slice(-2))
      .join("");

      // Concatenate the original encrypted string with the two padding strings
      const paddedEncryptedString =
      encryptedString + paddingString1 + paddingString2;

      // Store the triple-sized encrypted data in localStorage with the key name "Berwetta"
      localStorage.setItem(
      "Berwetta",
      JSON.stringify({
      iv: Array.from(iv),
      salt: Array.from(salt),
      encryptedData: paddedEncryptedString,
      })
      );
      console.log(`Data Before Encryption :: \n\n ${data}`);
      console.log(`Padded Encrypted Data :: \t\n ${paddedEncryptedString}`);
      }

      async function decryptData(password) {
      const passwordEncoder = new TextEncoder();
      const passwordBytes = passwordEncoder.encode(password);

      const encryptedDataString = localStorage.getItem("Berwetta");
      if (!encryptedDataString) {
      console.error('No data found in localStorage with key "Berwetta".');
      return;
      }

      const encryptedData = JSON.parse(encryptedDataString);
      const iv = new Uint8Array(encryptedData.iv);
      const salt = new Uint8Array(encryptedData.salt);
      const paddedEncryptedString = encryptedData.encryptedData;

      const passwordKey = await crypto.subtle.importKey(
      "raw",
      passwordBytes,
      {
      name: "PBKDF2",
      },
      false,
      ["deriveKey"]
      );

      // Remove the two padding strings
      const thirdLength = paddedEncryptedString.length / 3;
      const encryptedString = paddedEncryptedString.slice(0, thirdLength);

      const encryptedBytes = Array.prototype.map.call(
      encryptedString.match(/.{2}/g),
      (x) => parseInt(x, 16)
      );
      const encryptedDataBuffer = new Uint8Array(encryptedBytes);

      const key = await crypto.subtle.deriveKey(
      {
      name: "PBKDF2",
      salt: salt,
      iterations: 1000,
      hash: "SHA-256",
      },
      passwordKey,
      {
      name: "AES-CBC",
      length: 256,
      },
      true,
      ["decrypt"]
      );

      const decryptedData = await crypto.subtle.decrypt(
      {
      name: "AES-CBC",
      iv: iv,
      },
      key,
      encryptedDataBuffer
      );

      const decryptedString = new TextDecoder().decode(decryptedData);
      console.log("Decrypted data:", decryptedString);
      }

      function handleStorageChange() {
      const data = localStorage.getItem("Permenant_Language");
      // if ((data && data !== lastValue) || (performance.navigation.type == performance.navigation.TYPE_RELOAD)) {
      switch (window.performance.getEntriesByType("navigation")[0].type) {
      case "navigate":
      alert("Page Navigated to (First Entry)");
      break;
      case "reload":
      alert("Page Reloaded");
      break;
      case "back_forward":
      alert("Page GONE BACKWARD OR FORWARD");
      break;
      default :
      alert("The Page Is Pre-Rendered");
      break;
      }

      if (
      (data && data !== lastValue) || window.performance.getEntriesByType("navigation")[0].type !== "prerender") {
      lastValue = data;
      encryptData(password, data).then(() => {
      decryptData(password);
      });
      }
      }

      // Monitor localStorage changes from other tabs or windows
      // window.addEventListener("storage", (event) => {
      // if (event.key === "Permenant_Language") {
      // handleStorageChange();
      // // performance.navigation.
      // }
      // });

      // Poll for changes in the same tab or window
      function checkForChanges() {
      const newValue = localStorage.getItem("Permenant_Language");
      if (newValue !== lastValue) {
      lastValue = newValue;
      if (newValue) {
      encryptData(password, newValue).then(() => {
      decryptData(password);
      });
      } else {
      console.log(
      'No data found in localStorage with key "Permenant_Language".'
      );
      }
      }
      }

      // Poll for changes every 2 seconds
      setInterval(checkForChanges, 100);

      // Initial check on page load
      handleStorageChange();



      // function navigationType() {
      // var result;
      // var p;

      // if (window.performance.navigation) {
      // result = window.performance.navigation;
      // if (result == 255) {
      // result = 4;
      // } // 4 is my invention!
      // }

      // if (window.performance.getEntriesByType("navigation")) {
      // p = window.performance.getEntriesByType("navigation")[0].type;

      // if (p == "navigate") {
      // result = 0;
      // alert("Page Navigated to (First Entry)")
      // }
      // if (p == "reload") {
      // result = 1;
      // alert("Page Reloaded")
      // }
      // if (p == "back_forward") {
      // result = 2;
      // alert("Page GONE BACKWARD OR FORWARD")
      // }
      // if (p == "prerender") {
      // result = 3;
      // } //3 is my invention!
      // }
      // alert(result);
      // }


      // navigationType()
</script> -->


<!-- <script>
    // localStorage.clear()
</script>
 <script>

    // function Str_Random(length) {
    //     let result = '';
    //     const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';
    //     for (let i = 0; i < length; i++) { const randomInd=Math.floor(Math.random() * characters.length); result
    //         +=characters.charAt(randomInd); 
    //     }
    //     return result;
    // }
    
    // const password=Str_Random(100); alert(`The Password Is ::\t\n ${password}`);

    // async function encryptData(password, data) { try { const passwordEncoder=new
    //         TextEncoder(); const passwordBytes=passwordEncoder.encode(password); const salt=crypto.getRandomValues(new
    //         Uint8Array(16)); const passwordKey=await crypto.subtle.importKey( "raw" , passwordBytes, { name: "PBKDF2" },
    //         false, ["deriveKey"] ); const key=await crypto.subtle.deriveKey({ name: "PBKDF2" , salt: salt, iterations:
    //         1000, hash: "SHA-256" , }, passwordKey, { name: "AES-CBC" , length: 256 }, true, ["encrypt"] ); const
    //         iv=crypto.getRandomValues(new Uint8Array(16)); const encryptedData=await crypto.subtle.encrypt({
    //         name: "AES-CBC" , iv: iv }, key, passwordEncoder.encode(data) ); const encryptedBytes=new
    //         Uint8Array(encryptedData); const encryptedString=Array.from(encryptedBytes) .map(x=>
    //         `00${x.toString(16)}`.slice(-2))
    //         .join("");

    //         // Generate padding strings
    //         const paddingLength = encryptedBytes.length;
    //         const padding1 = crypto.getRandomValues(new Uint8Array(paddingLength));
    //         const padding2 = crypto.getRandomValues(new Uint8Array(paddingLength));

    //         const paddingString1 = Array.from(padding1)
    //         .map(x => `00${x.toString(16)}`.slice(-2))
    //         .join("");
    //         const paddingString2 = Array.from(padding2)
    //         .map(x => `00${x.toString(16)}`.slice(-2))
    //         .join("");

    //         // Concatenate encrypted string with padding strings
    //         const paddedEncryptedString = encryptedString + paddingString1 + paddingString2;

    //         return {
    //         iv: Array.from(iv),
    //         salt: Array.from(salt),
    //         encryptedData: paddedEncryptedString,
    //         };
    //         } catch (error) {
    //         console.error('Error during encryption:', error);
    //         }
    //         }

    // async function decryptData(password) {
    //             try {
    //             const passwordEncoder = new TextEncoder();
    //             const passwordBytes = passwordEncoder.encode(password);

    //             const encryptedDataString = localStorage.getItem("Permenant_Language");
    //             if (!encryptedDataString) {
    //             console.error('No data found in localStorage with key "Permenant_Language".');
    //             return;
    //             }

    //             const encryptedData = JSON.parse(encryptedDataString);
    //             const iv = new Uint8Array(encryptedData.iv);
    //             const salt = new Uint8Array(encryptedData.salt);
    //             const paddedEncryptedString = encryptedData.encryptedData;

    //             // Calculate the length of the original encrypted data
    //             const thirdLength = Math.floor(paddedEncryptedString.length / 3);
    //             const encryptedString = paddedEncryptedString.slice(0, thirdLength);

    //             const encryptedBytes = Array.from(encryptedString.match(/.{2}/g))
    //             .map(x => parseInt(x, 16));
    //             const encryptedDataBuffer = new Uint8Array(encryptedBytes);

    //             const passwordKey = await crypto.subtle.importKey(
    //             "raw",
    //             passwordBytes, {
    //             name: "PBKDF2"
    //             },
    //             false,
    //             ["deriveKey"]
    //             );

    //             const key = await crypto.subtle.deriveKey({
    //             name: "PBKDF2",
    //             salt: salt,
    //             iterations: 1000,
    //             hash: "SHA-256",
    //             },
    //             passwordKey, {
    //             name: "AES-CBC",
    //             length: 256
    //             },
    //             true,
    //             ["decrypt"]
    //             );

    //             const decryptedData = await crypto.subtle.decrypt({
    //             name: "AES-CBC",
    //             iv: iv
    //             },
    //             key,
    //             encryptedDataBuffer
    //             );

    //             const decryptedString = new TextDecoder().decode(decryptedData);
    //             console.log("Decrypted data:", decryptedString);
    //             alert(`Decrypted Language: ${decryptedString}`);
    //             // return decryptedString;

    //             } catch (error) {
    //             console.error('Error during decryption:', error);
    //             }
    //         }

            // function handleStorageChange() {
            //     const xhr = new XMLHttpRequest();
            //     xhr.open("GET", "https://api.geoapify.com/v1/ipinfo?&apiKey=b1eafd427c864fd8ad4009a48be4ec1f");
            //     xhr.onload = async function () {
            //     if (xhr.status === 200) {
            //     const response = JSON.parse(xhr.responseText);
            //     const language = response.country.languages[0].name_native === "العربية" ? "English" : "English";

            //     const encryptedData = await encryptData(password, language );
            //     localStorage.setItem("Permenant_Language", JSON.stringify(encryptedData));

            //     decryptData(password);
            //     } else {
            //     console.error('Failed to fetch language information:', xhr.statusText);
            //     }
            //     };
            //     xhr.send();
            // }
            
            // handleStorageChange();
            
            // alert(JSON.stringify(decryptData(password)))
            // Run on page load
            // Get_Decrypted_Language().then(Decrypted_Lang_Value => {
            //     alert("The Language From The Home Page Now is :: " + Decrypted_Lang_Value);
            // });
            // if( (Decrypted_Lang_Value != "English" && Decrypted_Lang_Value != "عربي")){
            //     handleStorageChange();
            // }
            
            // if(window.performance.getEntriesByType("navigation")[0].type === "navigate"){
                
            // }
</script> -->


<!-- <script>
    let storedLanguage = null;

    // Fetch and store language information once
    async function fetchAndStoreLanguage() {
        return new Promise((resolve, reject) => {
        console.log("API Called")
    const xhr = new XMLHttpRequest();
    xhr.open("GET", "https://api.geoapify.com/v1/ipinfo?&apiKey=b1eafd427c864fd8ad4009a48be4ec1f");
    xhr.onload = function () {
        if (xhr.status === 200) {
        const response = JSON.parse(xhr.responseText);
        storedLanguage = response.country.languages[0].name_native;
        resolve(storedLanguage);
        } else {
        reject(new Error('Failed to fetch language information: ' + xhr.statusText));
        }
    };
    xhr.onerror = function () {
    reject(new Error('Network error occurred.'));
    };
    xhr.send();
    });
    }

    // Handle encryption and decryption
    async function handleEncryptionAndDecryption() {
    try {
    if (!storedLanguage) {
    await fetchAndStoreLanguage();
    }
    var newLanguage;

    // Toggle between "English" and "عربي"
    if(window.performance.getEntriesByType("navigation")[0].type !== "prerender"){
        
        if(storedLanguage === "العربية"){
            newLanguage = "English";
        }
        else{
            newLanguage = "عربي";
        }
        // const newLanguage = storedLanguage === "العربية" ? "English" : "عربي";
    }

    // Encrypt the new language and store it in localStorage
    const encryptedData = await encryptData(password, newLanguage);
    localStorage.setItem("Permenant_Language", JSON.stringify(encryptedData));

    // Decrypt the data and handle the decrypted result
    const decryptedString = await decryptData(password);
    console.log("Decrypted Language:", decryptedString);

    // Update the stored language
    storedLanguage = newLanguage;
    } catch (error) {
    console.error(error);
    }
    }

    // Run the function to handle encryption and decryption
    handleEncryptionAndDecryption();
</script> -->

</body>
</html>